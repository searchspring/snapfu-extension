(function(){"use strict";var n={886:function(n,e,t){var i=t(963),o={i8:"1.3.2"},s=t(252),r=t(577),l=t.p+"img/searchspring.svg",a=t.p+"img/github.svg",c=t(262);const g={class:"controller"},u={class:"controller-header"},d={class:"controller-id"},f={key:0,class:"controller-details"},p=(0,s._)("b",null,"type:",-1),h=(0,s._)("b",null,"loaded:",-1),v=(0,s._)("b",null,"results:",-1);var b=(0,s.aZ)({__name:"controller",props:{controller:null},setup(n){const e=n,t=(0,s.Fl)((()=>{switch(e.controller.type){case"search":return"magnifying-glass";case"autocomplete":return"list";case"finder":return"location-crosshairs";case"recommendation":return"grip";default:return"magnifying-glass"}}));return(e,i)=>{const o=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",u,[(0,s._)("span",null,[(0,s.Wm)(o,{icon:(0,c.SU)(t)},null,8,["icon"]),(0,s._)("span",d,(0,r.zw)(n.controller.id),1)]),(0,s.Wm)(o,{class:"collapse-icon",icon:n.controller.collapsed?"angle-down":"angle-up"},null,8,["icon"])]),n.controller.collapsed?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("div",null,[p,(0,s.Uk)(" "+(0,r.zw)(n.controller.type),1)]),(0,s._)("div",null,[h,(0,s.Uk)(" "+(0,r.zw)(n.controller.store?.loaded),1)]),(0,s._)("div",null,[v,(0,s.Uk)(" "+(0,r.zw)(n.controller.store.results.length),1)])]))])}}});const w=b;var y=w;const k={settings:{enabled:!1,intercepts:"*://snapui.searchspring.io/*/bundle.js*\n*://cdn.searchspring.net/search/v3/js/searchspring.catalog.js*\n*://cdn.searchspring.net/search/v3/lts/searchspring.catalog.js*"},bundle:{url:"https://localhost:3333/bundle.js",context:"shopper = {\n  id: 'snapdev'\n};",mergeContext:!0}},m=n=>{chrome.storage.sync.set(n)},_=()=>{m(k)},O=async()=>{const n=await chrome.storage.sync.get();return"undefined"!=typeof n?.bundle?.url?n:k},x=(...n)=>{let e,t,i,o;function s(n,e){let t;if(isNaN(n)&&isNaN(e)&&"number"===typeof n&&"number"===typeof e)return!0;if(n===e)return!0;if("function"===typeof n&&"function"===typeof e||n instanceof Date&&e instanceof Date||n instanceof RegExp&&e instanceof RegExp||n instanceof String&&e instanceof String||n instanceof Number&&e instanceof Number)return n.toString()===e.toString();if(!(n instanceof Object&&e instanceof Object))return!1;if(n.isPrototypeOf(e)||e.isPrototypeOf(n))return!1;if(n.constructor!==e.constructor)return!1;if(n.prototype!==e.prototype)return!1;if(i.indexOf(n)>-1||o.indexOf(e)>-1)return!1;for(t in e){if(e.hasOwnProperty(t)!==n.hasOwnProperty(t))return!1;if(typeof e[t]!==typeof n[t])return!1}for(t in n){if(e.hasOwnProperty(t)!==n.hasOwnProperty(t))return!1;if(typeof e[t]!==typeof n[t])return!1;switch(typeof n[t]){case"object":case"function":if(i.push(n),o.push(e),!s(n[t],e[t]))return!1;i.pop(),o.pop();break;default:if(n[t]!==e[t])return!1;break}}return!0}if(n.length<1)return!0;for(e=1,t=n.length;e<t;e++)if(i=[],o=[],!s(n[0],n[e]))return!1;return!0},C=async()=>{const n={active:!0,currentWindow:!0},[e]=await chrome.tabs.query(n);return`${e.id}`||void 0},S={class:"snapfu"},N={class:"header"},q=(0,s._)("img",{class:"logo",src:l},null,-1),D={class:"buttons"},j={key:0,class:"on"},U={key:0,class:"open"},J={key:0,class:"page-settings"},R={class:"option intercepts"},P=(0,s.Uk)(" Intercepts "),z=(0,s._)("div",{class:"description"},"Intercepts are used for blocking network requests. This helps prevent multiple bundles from loading.",-1),W=["rows"],T={key:0,class:"option reset"},I=(0,s.Uk)(" Restore Defaults "),V=(0,s._)("div",{class:"description"},"Set the extension settings back to initial values.",-1),E={class:"option footer"},L={class:"version"},Z=(0,s._)("a",{href:"https://github.com/searchspring/snapfu-extension",target:"_blank"},[(0,s._)("img",{class:"github",src:a})],-1),B={key:1,class:"page-config"},F={class:"option integration"},Q=(0,s.Uk)("Integration "),Y={key:0,class:"snap-version"},$={key:1},G={key:2},H={class:"description controllers"},K=(0,s.Uk)(" Controllers "),M={key:0},X=["onClick"],A={key:3,class:"description"},nn={key:0,class:"option url"},en=(0,s.Uk)(" Bundle URL "),tn=(0,s._)("div",{class:"description"},[(0,s.Uk)("URL of bundle to inject onto the page."),(0,s._)("br")],-1),on={key:1,class:"option context"},sn=(0,s.Uk)(" Script Context "),rn=(0,s._)("div",{class:"description"},"Contextual variables to be injected with the script.",-1),ln=["rows"],an={class:"context-merge"},cn=(0,s._)("span",null,"Merge context: ",-1);var gn=(0,s.aZ)({__name:"popup",props:{version:String},setup(n){const e=n,t=(0,c.qj)({settings:{show:!1,confirmReset:!1},integration:{details:{},loading:!0,collapsed:!1},config:{},savedConfig:{}});function o(){m(t.config),t.savedConfig=JSON.parse(JSON.stringify(t.config))}function l(n="",e="saved"){const i=n.split("."),o="saved"==e?t.savedConfig:k,s=n?i.reduce(((n,e)=>{if(n[e])return n[e]}),o):o,r=n?i.reduce(((n,e)=>{if(n[e])return n[e]}),t.config):t.config;if("undefined"!=typeof s)try{const e=JSON.parse(JSON.stringify(s)),t=JSON.parse(JSON.stringify(r||{}));return n||(delete e.settings.enabled,delete t.settings.enabled),!x(e,t)}catch(l){return!1}return!1}function a(n,e="default"){const i=n.split("."),o="saved"==e?t.savedConfig:k,s=i.reduce(((n,e)=>{if(n[e])return n[e]}),o);"undefined"!=typeof s&&i.reduce(((n,e,t)=>{if(t!=i.length-1)return n[e];n[e]=JSON.parse(JSON.stringify(s))}),t.config)}function g(n,e){const i=n.split(".");i.reduce(((n,t,o)=>{if(o!=i.length-1)return n[t];n[t]=JSON.parse(JSON.stringify(e))}),t.config)}function u(){const n=t.config.settings.enabled;t.config=JSON.parse(JSON.stringify(t.savedConfig)),t.config.settings.enabled=!n,o()}function d(){t.settings.show=!t.settings.show,t.settings.show||(t.settings.confirmReset=!1)}async function f(){t.settings.confirmReset?(_(),t.config=await O(),t.savedConfig=JSON.parse(JSON.stringify(t.config)),t.settings.confirmReset=!1):t.settings.confirmReset=!0}return(0,s.bv)((async()=>{const n=await O();t.config=n,t.savedConfig=JSON.parse(JSON.stringify(n));const e=await C(),i=await chrome.storage.local.get();e&&(t.integration.details=i[e],t.integration.details?.timestamp&&(t.integration.loading=!1)),chrome.storage.onChanged.addListener((async(n,i)=>{if(e&&"local"===i){const n=await chrome.storage.local.get();t.integration.details=n[e],t.integration.details?.timestamp?t.integration.loading=!1:(t.integration.loading=!0,t.integration.details={})}}))})),(n,c)=>{const p=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",S,[(0,s._)("div",N,[q,(0,s._)("div",D,[l()?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"button save",onClick:o},[(0,s.Wm)(p,{icon:"save"})])):(0,s.kq)("",!0),(0,s._)("div",{class:(0,r.C_)(["button toggle",{on:t?.config?.settings?.enabled}]),onClick:u},[t?.config?.settings?.enabled?((0,s.wg)(),(0,s.iD)("span",j)):(0,s.kq)("",!0),(0,s.Wm)(p,{icon:"toggle-off"})],2),(0,s._)("div",{class:(0,r.C_)(["button settings",{open:t?.settings.show}]),onClick:d},[t?.settings.show?((0,s.wg)(),(0,s.iD)("span",U)):(0,s.kq)("",!0),(0,s.Wm)(p,{icon:"gear"})],2)])]),t?.settings.show?((0,s.wg)(),(0,s.iD)("div",J,[(0,s._)("div",R,[(0,s._)("h3",null,[P,l("settings.intercepts","default")?((0,s.wg)(),(0,s.j4)(p,{key:0,class:"reset",onClick:c[0]||(c[0]=n=>a("settings.intercepts")),icon:"undo",title:"reset intercepts"})):(0,s.kq)("",!0)]),z,(0,s.wy)((0,s._)("textarea",{placeholder:"intercepts should be here...",required:"true",spellcheck:"false","onUpdate:modelValue":c[1]||(c[1]=n=>t.config.settings.intercepts=n),rows:t.config.settings.intercepts.split("\n").length},null,8,W),[[i.nr,t.config.settings.intercepts]])]),l("","default")?((0,s.wg)(),(0,s.iD)("div",T,[(0,s._)("h3",null,[I,(0,s._)("button",{class:"reset-extension",onClick:f},(0,r.zw)(t.settings.confirmReset?"confirm":"reset"),1)]),V])):(0,s.kq)("",!0),(0,s._)("div",E,[(0,s._)("span",L,"v"+(0,r.zw)(e.version),1),Z])])):(0,s.kq)("",!0),!t?.settings.show&&t.config?.bundle?((0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("div",F,[t.integration.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("h3",{key:0,onClick:c[2]||(c[2]=()=>t.integration.collapsed=!t.integration.collapsed)},[(0,s._)("span",null,[Q,t.integration.details.version?((0,s.wg)(),(0,s.iD)("span",Y,"v"+(0,r.zw)(t.integration.details.version),1)):(0,s.kq)("",!0)]),(0,s.Wm)(p,{class:"header-icon collapse-icon",icon:t.integration.collapsed?"angle-down":"angle-up"},null,8,["icon"])])),t.integration.loading?((0,s.wg)(),(0,s.iD)("div",$,"loading...")):(0,s.kq)("",!0),t.integration.loading||!t.integration.details.version||t.integration.collapsed?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("div",H,[(0,s._)("h4",null,[K,t.integration.details.controllers?.length?((0,s.wg)(),(0,s.iD)("span",M,"("+(0,r.zw)(t.integration.details.controllers?.length)+")",1)):(0,s.kq)("",!0)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.integration.details.controllers,((n,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,onClick:()=>n.collapsed=!n.collapsed},[(0,s.Wm)(y,{controller:n},null,8,["controller"])],8,X)))),128))])])),!1!==t.integration.loading||t.integration.details.version||t.integration.collapsed?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",A," No Snap integration found. "))]),t?.config?.settings?.enabled?((0,s.wg)(),(0,s.iD)("div",nn,[(0,s._)("h3",null,[en,(0,s._)("span",null,[(0,s._)("button",{class:"url-cdn",onClick:c[3]||(c[3]=n=>g("bundle.url","https://snapui.searchspring.io/siteid/branch/bundle.js"))},"cdn"),(0,s._)("button",{class:"url-local",onClick:c[4]||(c[4]=n=>g("bundle.url","https://localhost:3333/bundle.js"))},"local")])]),tn,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":c[5]||(c[5]=n=>t.config.bundle.url=n),type:"text"},null,512),[[i.nr,t.config.bundle.url]])])):(0,s.kq)("",!0),t?.config?.settings?.enabled?((0,s.wg)(),(0,s.iD)("div",on,[(0,s._)("h3",null,[sn,l("bundle.context","default")?((0,s.wg)(),(0,s.j4)(p,{key:0,class:"reset",onClick:c[6]||(c[6]=n=>a("bundle.context")),icon:"undo",title:"reset context variables"})):(0,s.kq)("",!0)]),rn,(0,s.wy)((0,s._)("textarea",{placeholder:"context variables should be here...",required:"true",spellcheck:"false","onUpdate:modelValue":c[7]||(c[7]=n=>t.config.bundle.context=n),rows:t.config.bundle.context.split("\n").length},null,8,ln),[[i.nr,t.config.bundle.context]]),(0,s._)("label",an,[cn,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":c[8]||(c[8]=n=>t.config.bundle.mergeContext=n),type:"checkbox"},null,512),[[i.e8,t.config.bundle.mergeContext]])])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}}});const un=gn;var dn=un,fn=t(947),pn=t(810),hn=t(436);fn.vI.add(hn.gPx,hn.gr5,hn.r6l,hn.Bl_,hn.X7o,hn.Y$T,hn.Zrf,hn.TqS,hn.QR4,hn.onQ,hn.gc2);const vn=(0,i.ri)(dn,{version:o.i8});vn.component("font-awesome-icon",pn.GN),vn.mount("#app")}},e={};function t(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return n[i](s,s.exports,t),s.exports}t.m=n,function(){var n=[];t.O=function(e,i,o,s){if(!i){var r=1/0;for(g=0;g<n.length;g++){i=n[g][0],o=n[g][1],s=n[g][2];for(var l=!0,a=0;a<i.length;a++)(!1&s||r>=s)&&Object.keys(t.O).every((function(n){return t.O[n](i[a])}))?i.splice(a--,1):(l=!1,s<r&&(r=s));if(l){n.splice(g--,1);var c=o();void 0!==c&&(e=c)}}return e}s=s||0;for(var g=n.length;g>0&&n[g-1][2]>s;g--)n[g]=n[g-1];n[g]=[i,o,s]}}(),function(){t.d=function(n,e){for(var i in e)t.o(e,i)&&!t.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:e[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)}}(),function(){t.p="/"}(),function(){var n={42:0};t.O.j=function(e){return 0===n[e]};var e=function(e,i){var o,s,r=i[0],l=i[1],a=i[2],c=0;if(r.some((function(e){return 0!==n[e]}))){for(o in l)t.o(l,o)&&(t.m[o]=l[o]);if(a)var g=a(t)}for(e&&e(i);c<r.length;c++)s=r[c],t.o(n,s)&&n[s]&&n[s][0](),n[s]=0;return t.O(g)},i=self["webpackChunk_searchspring_snapfu_extension"]=self["webpackChunk_searchspring_snapfu_extension"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(886)}));i=t.O(i)})();