(function(){"use strict";const e={settings:{enabled:!1,intercepts:"*://snapui.searchspring.io/*/bundle.js*\n*://cdn.searchspring.net/search/v3/js/searchspring.catalog.js*\n*://cdn.searchspring.net/search/v3/lts/searchspring.catalog.js*"},bundle:{url:"https://localhost:3333/bundle.js",context:"shopper = {\n  id: 'snapdev'\n};",mergeContext:!0}},n=async()=>{const n=await chrome.storage.sync.get();return"undefined"!=typeof n?.bundle?.url?n:e};async function t(e){const t=await n();if(t.settings.enabled){const n=t.bundle.url,s=t.bundle.context,c=t.bundle.mergeContext,r=Array.from(document.querySelectorAll('script[id^=searchspring], script[src*="snapui.searchspring.io"]'));c||r.forEach((e=>{e.innerHTML=""}));const a=r.sort(((e,n)=>e.innerHTML.length-n.innerHTML.length)).pop(),o=a?.innerHTML;let i=s;if(c&&(i=o+"\n"+s),n){const t=document.createElement("script");t.src=e,t.id="snapfu-script",t.setAttribute("url",n),t.innerHTML=i,(document.head||document.documentElement).appendChild(t)}}}function s(e){if(e){const n=document.createElement("script");n.src=e,n.id="snapfu-scraper",(document.head||document.documentElement).appendChild(n)}}(async function(){chrome.runtime.sendMessage({text:"getTabId"},(async e=>{const n=await chrome.storage.local.get();e&&n[e]&&delete n[e],await chrome.storage.local.set(n),document.addEventListener("snapfu-scrape",(async n=>{const t=n.detail,s=await chrome.storage.local.get();e&&(s[e]=t,chrome.storage.local.set(s))}))})),t(chrome.runtime.getURL("/js/loader.js")),s(chrome.runtime.getURL("/js/scraper.js"))})()})();